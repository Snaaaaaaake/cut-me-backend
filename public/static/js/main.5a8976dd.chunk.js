(this["webpackJsonpcut-me"]=this["webpackJsonpcut-me"]||[]).push([[0],{82:function(e,t,n){e.exports=n(95)},95:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),l=n.n(c),i=n(42),o=n(15),u=n(66),s=n.n(u),m=n(56),d=n.n(m),p=n(67),f=n(68),h=n(69),b="https://gentle-eyrie-87398.herokuapp.com",E={"Content-Type":"application/json"};function g(e){return O.apply(this,arguments)}function O(){return(O=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw e.sent;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=function(){function e(t){Object(p.a)(this,e),this.apiUrl=void 0,this.usersUrl=void 0,this.linksUrl=void 0,this.apiUrl=t||b,this.usersUrl="".concat(this.apiUrl,"/usersApi"),this.linksUrl="".concat(this.apiUrl,"/linksApi")}return Object(f.a)(e,[{key:"getUser",value:function(){return fetch("".concat(this.usersUrl,"/me"),{headers:E,credentials:"include"}).then(g)}},{key:"userSignUp",value:function(e,t,n){return fetch("".concat(this.usersUrl,"/signup"),{method:"post",headers:E,body:JSON.stringify({email:t,password:n,name:e})}).then(g)}},{key:"userSignIn",value:function(e,t){return fetch("".concat(this.usersUrl,"/signin"),{method:"post",headers:E,body:JSON.stringify({email:t,password:e})}).then(g)}},{key:"userSignOut",value:function(){return fetch("".concat(this.usersUrl,"/signout"),{headers:E,credentials:"include"}).then(g)}},{key:"addLink",value:function(e,t,n,a){return fetch("".concat(this.linksUrl,"/add"),{method:"post",headers:E,body:JSON.stringify({url:e,title:n,short:a,owner:t})}).then(g)}},{key:"getLinks",value:function(e){return fetch("".concat(this.linksUrl,"/get"),{method:"post",credentials:"include",headers:E,body:JSON.stringify({owner:e})}).then(g)}},{key:"removeLink",value:function(e){return fetch("".concat(this.linksUrl,"/remove"),{method:"delete",credentials:"include",headers:E,body:JSON.stringify({_id:e})}).then(g)}},{key:"removeLinkMany",value:function(e){return fetch("".concat(this.linksUrl,"/removeMany"),{method:"delete",credentials:"include",headers:E,body:JSON.stringify({array:e})}).then(g)}},{key:"editLink",value:function(e,t){return fetch("".concat(this.linksUrl,"/edit"),{method:"post",credentials:"include",headers:E,body:JSON.stringify({_id:e,title:t})}).then(g)}}]),e}(),y=Object(a.createContext)(null),v=n(13),k=n(128),S=n(139),C=n(122),x=n(127),L=n(125),U=function(e){return r.a.createElement(C.a,{maxWidth:"md"},r.a.createElement(L.a,{elevation:3},e.children))},w=n(4),A=n(18),T=n(129),F=n(136),_=n(137),N={name:"",password:"",passwordAgain:"",email:"",isLoading:!1,error:null},R={password:"",email:"",isLoading:!1,error:null},H={url:"",title:"",owner:"",short:"",isLoading:!1,error:null,link:null},W={isEditing:!1,editValue:"",isLoading:!1},I={isModalOpened:!1,modalContent:""},q={user:null,error:null,isLoading:!1},z={links:[],error:null,isLoading:!1},D={sorterType:"date",isAscending:!1},J=n(126),P=function(){return r.a.createElement(F.a,{p:3,display:"flex",justifyContent:"center"},r.a.createElement(J.a,null))},M=function(e){var t=e.error;return r.a.createElement(F.a,{p:4,style:{color:"red"}},r.a.createElement(x.a,{variant:"body1",component:"p"},t.message))},K=n(29),V=n(135),Q=function(){return{type:"FETCH_USER_REQUEST"}},Z=function(e){return{type:"FETCH_USER_SUCCESS",payload:e}},B=function(e){return{type:"FETCH_LINKS_SUCCESS",payload:e}},Y=function(e){return{type:"FETCH_LINKS_FAILURE",payload:e}},X=Object(k.a)((function(){return Object(S.a)({root:{border:"none"},formContainer:{padding:"15px",display:"flex",flexWrap:"wrap",border:"none"}})})),G={fetchUserSuccessAction:Z},$=Object(o.b)(null,G)((function(e){var t=Object(a.useContext)(y),n=X(),c=Object(a.useState)(Object(w.a)({},N)),l=Object(A.a)(c,2),i=l[0],o=l[1],u=i.name,s=i.password,m=i.passwordAgain,d=i.email,p=i.isLoading,f=i.error,h=e.fetchUserSuccessAction,b=e.closeHandler,E=function(e){e.preventDefault(),o(Object(w.a)(Object(w.a)({},i),{},Object(K.a)({},e.target.id,e.target.value)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{mt:3},r.a.createElement(x.a,{variant:"h6",align:"center",component:"h5"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),r.a.createElement("form",{className:n.root,onSubmit:function(e){e.preventDefault(),e.currentTarget.checkValidity()?s!==m?o(Object(w.a)(Object(w.a)({},i),{},{error:"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442!"})):(o(Object(w.a)(Object(w.a)({},i),{},{isLoading:!0})),t.userSignUp(u,d,s).then((function(e){h(e),o(Object(w.a)({},N)),alert("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441\u043e\u0437\u0434\u0430\u043d, \u0432\u0445\u043e\u0434 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d"),b()})).catch((function(e){return o(Object(w.a)(Object(w.a)({},i),{},{error:e.message}))}))):o(Object(w.a)(Object(w.a)({},i),{},{error:"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0444\u043e\u0440\u043c\u044b!"}))}},r.a.createElement("fieldset",{className:n.formContainer,disabled:p},r.a.createElement(V.a,{onChange:E,id:"name",label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",helperText:"\u0414\u043e\u043f\u0443\u0441\u043a\u0430\u044e\u0442\u0441\u044f \u0431\u0443\u043a\u0432\u044b \u0438 \u0446\u0438\u0444\u0440\u044b",fullWidth:!0,margin:"normal",required:!0,type:"text",value:u,inputProps:{pattern:"[\u0430-\u044f\u0410-\u042f\u0451\u0401A-Za-z0-9-_\\s]*",minLength:2,maxLength:25}}),r.a.createElement(V.a,{onChange:E,id:"email",label:"Email",helperText:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",fullWidth:!0,margin:"normal",required:!0,type:"email",value:d}),r.a.createElement(V.a,{onChange:E,id:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",helperText:"\u041c\u0438\u043d\u0438\u043c\u0443\u043c \u0448\u0435\u0441\u0442\u044c \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",fullWidth:!0,margin:"normal",required:!0,type:"password",value:s,inputProps:{pattern:"[^<>s]*",minLength:6}}),r.a.createElement(V.a,{onChange:E,id:"passwordAgain",label:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",fullWidth:!0,margin:"normal",required:!0,type:"password",value:m}),r.a.createElement(x.a,{style:{color:"red"},variant:"subtitle1"},f),r.a.createElement(F.a,{mt:3},r.a.createElement(T.a,{type:"submit",variant:"contained",color:"primary"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")))))})),ee=Object(k.a)((function(){return Object(S.a)({root:{border:"none"},formContainer:{padding:"15px",display:"flex",flexWrap:"wrap",border:"none"}})})),te={fetchUserSuccessAction:Z},ne=Object(o.b)(null,te)((function(e){var t=Object(a.useContext)(y),n=ee(),c=Object(a.useState)(Object(w.a)({},R)),l=Object(A.a)(c,2),i=l[0],o=l[1],u=i.password,s=i.email,m=i.isLoading,d=i.error,p=e.fetchUserSuccessAction,f=e.closeHandler,h=function(e){e.preventDefault(),o(Object(w.a)(Object(w.a)({},i),{},Object(K.a)({},e.target.id,e.target.value)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{mt:2},r.a.createElement(x.a,{variant:"h6",align:"center",component:"h5"},"\u0412\u043e\u0439\u0442\u0438")),r.a.createElement("form",{className:n.root,onSubmit:function(e){e.preventDefault(),e.currentTarget.checkValidity()?(o(Object(w.a)(Object(w.a)({},i),{},{isLoading:!0})),t.userSignIn(u,s).then((function(e){p(e),o(Object(w.a)({},R)),alert("\u0412\u0445\u043e\u0434 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e!"),f()})).catch((function(e){return o(Object(w.a)(Object(w.a)({},i),{},{error:e.message}))}))):o(Object(w.a)(Object(w.a)({},i),{},{error:"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0444\u043e\u0440\u043c\u044b!"}))}},r.a.createElement("fieldset",{className:n.formContainer,disabled:m},r.a.createElement(V.a,{onChange:h,id:"email",label:"Email",helperText:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",fullWidth:!0,margin:"normal",required:!0,type:"email",value:s}),r.a.createElement(V.a,{onChange:h,id:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",fullWidth:!0,margin:"normal",required:!0,type:"password",value:u}),r.a.createElement(x.a,{style:{color:"red"},variant:"subtitle1"},d),r.a.createElement(F.a,{mt:3},r.a.createElement(T.a,{type:"submit",variant:"contained",color:"primary"},"\u0412\u043e\u0439\u0442\u0438")))))})),ae={fetchUserRequestAction:Q,fetchUserSuccessAction:Z,fetchUserFailureAction:function(e){return{type:"FETCH_USER_FAILURE",payload:e}}},re=Object(o.b)((function(e){return{userState:e.userState}}),ae)((function(e){var t=Object(v.f)(),n=Object(a.useContext)(y),c=e.fetchUserRequestAction,l=e.fetchUserSuccessAction,i=e.fetchUserFailureAction,o=e.closeHandler,u=e.userState,s=u.user,m=u.error,d=u.isLoading;return m?r.a.createElement(M,{error:m}):d?r.a.createElement(P,null):s?r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{p:2},r.a.createElement(x.a,{variant:"h6",component:"h5"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c")),r.a.createElement(F.a,{p:2},r.a.createElement(x.a,{variant:"body1",component:"p"},"\u0418\u043c\u044f: ",s.name),r.a.createElement(x.a,{variant:"body1",component:"p"},"\u041f\u043e\u0447\u0442\u0430: ",s.email)),r.a.createElement(F.a,{p:2,display:"flex",justifyContent:"center"},r.a.createElement(T.a,{onClick:function(){c(),n.userSignOut().then((function(){l(null),alert("\u0412\u044b \u0432\u044b\u0448\u043b\u0438 \u0438\u0437 \u0441\u0432\u043e\u0435\u0433\u043e \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"),o(),t.push("/")})).catch(i)},variant:"contained",color:"primary"},"\u0412\u044b\u0439\u0442\u0438"))):r.a.createElement("div",null,"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")})),ce=Object(k.a)((function(){return Object(S.a)({modal:{display:"grid",alignItems:"center",justifyContent:"center",overflowY:"auto"},modalContainer:{position:"relative"},modalCloseButton:{position:"absolute",top:"0px",right:"-15px",borderRadius:"50px"}})})),le=Object(o.b)((function(e){return{userState:e.userState}}))((function(e){var t=ce(),n=Object(v.f)(),c=Object(v.g)(),l=Object(a.useState)(Object(w.a)({},I)),i=Object(A.a)(l,2),o=i[0],u=i[1],s=o.isModalOpened,m=o.modalContent,d=e.userState,p=d.user,f=d.isLoading,h=d.error,b=function(e){return function(){u({isModalOpened:!0,modalContent:e})}},E=function(){u(Object(w.a)({},I))},g=function(){return f?r.a.createElement(P,null):h?r.a.createElement(M,{error:h}):p?r.a.createElement(r.a.Fragment,null,c.pathname.includes("user/links")?r.a.createElement(T.a,{onClick:function(){return n.push("/")},color:"primary"},"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"):r.a.createElement(T.a,{onClick:function(){return n.push("/user/links")},color:"primary"},"\u041c\u043e\u0438 \u0441\u0441\u044b\u043b\u043a\u0438"),r.a.createElement(T.a,{onClick:b(r.a.createElement(re,{closeHandler:E})),color:"primary"},"\u041c\u043e\u0439 \u043f\u0440\u043e\u0444\u0438\u043b\u044c")):r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{onClick:b(r.a.createElement(ne,{closeHandler:E})),color:"primary"},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement(T.a,{onClick:b(r.a.createElement($,{closeHandler:E})),color:"primary"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{p:1,display:"flex",justifyContent:"flex-end",flexWrap:"wrap"},r.a.createElement(g,null)),r.a.createElement(F.a,{mb:5},e.children),r.a.createElement(_.a,{disableAutoFocus:!0,disableEnforceFocus:!0,className:t.modal,open:s,onClose:E},r.a.createElement(L.a,{className:t.modalContainer,elevation:2},r.a.createElement(T.a,{className:t.modalCloseButton,size:"small",title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:E,color:"primary"},"X"),m)))})),ie=Object(k.a)((function(){return Object(S.a)({root:{border:"none"},formContainer:{padding:"15px",display:"flex",flexWrap:"wrap",border:"none"},copyLinkElements:{margin:"5px"}})})),oe=Object(o.b)((function(e){return{userState:e.userState}}))((function(e){var t,n=Object(a.useContext)(y),c=ie(),l=Object(a.useState)(Object(w.a)({},H)),i=Object(A.a)(l,2),o=i[0],u=i[1],s=o.url,m=o.title,d=o.short,p=o.error,f=o.isLoading,h=o.link,E=e.userState.user?e.userState.user._id:"5f91d4ade6a8f725188ff0e5",g=function(e){e.preventDefault(),u(Object(w.a)(Object(w.a)({},o),{},Object(K.a)({},e.target.id,e.target.value)))};return r.a.createElement(r.a.Fragment,null,h&&r.a.createElement(F.a,{pt:3,pb:2,display:"flex",justifyContent:"center",flexWrap:"wrap"},r.a.createElement(V.a,{label:"\u0412\u0430\u0448\u0430 \u0441\u0441\u044b\u043b\u043a\u0430",inputProps:{readOnly:!0},value:h,inputRef:function(e){return t=e},variant:"outlined",size:"small",className:c.copyLinkElements}),r.a.createElement(T.a,{onClick:function(e){t.select(),document.execCommand("copy"),e.currentTarget.textContent="\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e!"},variant:"contained",color:"secondary",className:c.copyLinkElements},"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c")),r.a.createElement("form",{className:c.root,onSubmit:function(e){e.preventDefault(),e.currentTarget.checkValidity()?(u(Object(w.a)(Object(w.a)({},o),{},{isLoading:!0})),n.addLink(s,E,m,d).then((function(e){u(Object(w.a)(Object(w.a)({},H),{},{link:"".concat(b,"/").concat(e[0].hash)}))})).catch((function(e){return u(Object(w.a)(Object(w.a)({},o),{},{isLoading:!1,error:e.message}))}))):u(Object(w.a)(Object(w.a)({},o),{},{error:"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0444\u043e\u0440\u043c\u044b!"}))}},r.a.createElement("fieldset",{className:c.formContainer,disabled:f},r.a.createElement(V.a,{onChange:g,id:"url",label:"\u0421\u0441\u044b\u043b\u043a\u0430",helperText:"\u0421\u0441\u044b\u043b\u043a\u0430, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u043a\u0440\u0430\u0442\u0438\u0442\u044c",fullWidth:!0,margin:"normal",required:!0,size:"medium",type:"text",value:s,inputProps:{pattern:"[^<>]*"}}),r.a.createElement(V.a,{onChange:g,id:"title",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",helperText:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0432\u044b \u0431\u0443\u0434\u0435\u0442\u0435 \u0432\u0438\u0434\u0435\u0442\u044c \u0432 \u0441\u0432\u043e\u0451\u043c \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0435",fullWidth:!0,margin:"normal",type:"text",size:"small",value:m,inputProps:{pattern:"[\u0430-\u044f\u0410-\u042f\u0451\u0401A-Za-z0-9-_\\s]*"}}),r.a.createElement(V.a,{onChange:g,id:"short",label:"\u0421\u043e\u043a\u0440\u0430\u0449\u0435\u043d\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442",helperText:"\u0411\u0443\u0434\u0435\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u0441\u043e\u043a\u0440\u0430\u0449\u0435\u043d\u043d\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e \u0441\u0441\u044b\u043b\u043a\u0438, \u0434\u043e\u043f\u0443\u0441\u043a\u0430\u044e\u0442\u0441\u044f \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435\r \u0431\u0443\u043a\u0432\u044b \u0438 \u0446\u0438\u0444\u0440\u044b",fullWidth:!0,size:"small",margin:"normal",type:"text",value:d,inputProps:{pattern:"[A-Za-z0-9]*"}}),r.a.createElement(x.a,{style:{color:"red"},variant:"subtitle1"},p),r.a.createElement(F.a,{mt:3},r.a.createElement(T.a,{type:"submit",variant:"contained",color:"primary"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")))))})),ue=Object(k.a)((function(){return Object(S.a)({title:{margin:"10px"}})})),se=function(){var e=ue();return r.a.createElement(r.a.Fragment,null,r.a.createElement(le,null,r.a.createElement(C.a,{maxWidth:"lg"},r.a.createElement(x.a,{variant:"h3",className:e.title,align:"center",component:"h1"},"\u0421\u043e\u043a\u0440\u0430\u0442\u0438\u0442\u0435\u043b\u044c \u0441\u0441\u044b\u043b\u043e\u043a"),r.a.createElement(x.a,{variant:"body1",className:e.title,align:"center"},"\u0421\u0435\u0440\u0432\u0438\u0441 \u043f\u0440\u0435\u0434\u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d \u0434\u043b\u044f \u0441\u043e\u043a\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u0434\u043b\u0438\u043d\u043d\u044b\u0445 \u0441\u0441\u044b\u043b\u043e\u043a. \u0415\u0441\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u0432\u0435\u0441\u0442\u0438 \u0430\u043a\u043a\u0430\u0443\u043d\u0442 \u0438 \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u0442\u044c \u0432 \u043d\u0451\u043c \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c \u0441\u0441\u044b\u043b\u043e\u043a. \u042d\u0442\u043e \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043e\u0447\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0432\u0441\u0451 \u0443\u0441\u043b\u043e\u0432\u043d\u043e ;)"))),r.a.createElement(U,null,r.a.createElement(oe,null)))},me=n(59),de=n(132),pe=n(133),fe=n(130),he=n(131),be=n(138),Ee=n(134);function ge(e){return e<10?"0".concat(e):"".concat(e)}var Oe=Object(k.a)((function(e){return Object(S.a)({link:{padding:0,textTransform:"none",color:e.palette.text.secondary,fontWeight:"normal"}})})),je={fetchLinksSuccessAction:B,fetchLinksFailureAction:Y},ye=Object(o.b)((function(e){return{userState:e.userState}}),je)((function(e){var t=Object(a.useContext)(y),n=Oe(),c=Object(a.useState)(Object(w.a)({},W)),l=Object(A.a)(c,2),i=l[0],o=l[1],u=i.isEditing,s=i.editValue,m=i.isLoading,d=e.userState.user,p=e.link,f=p._id,h=p.url,E=p.title,g=p.counter,O=p.date,j=p.hash,v=e.checkboxIsChecked,k=e.checkboxHandler,S=e.fetchLinksSuccessAction,C=e.fetchLinksFailureAction,L="".concat(b,"/").concat(j),U=document.documentElement.clientWidth,_=function(){o(Object(w.a)(Object(w.a)({},W),{},{isEditing:!u}))},N=r.a.createElement("form",{onSubmit:function(){o(Object(w.a)(Object(w.a)({},W),{},{isLoading:!0})),t.editLink(f,s).then((function(){return t.getLinks(d._id).then((function(e){S(e),o(Object(w.a)({},W))}))})).catch(C)}},r.a.createElement(F.a,{display:"flex",alignItems:"center",flexWrap:"wrap"},r.a.createElement(V.a,{autoFocus:!0,value:s,onChange:function(e){o(Object(w.a)(Object(w.a)({},W),{},{isEditing:!0,editValue:e.target.value}))},id:"email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",margin:"normal",type:"text",inputProps:{pattern:"[\u0430-\u044f\u0410-\u042f\u0451\u0401A-Za-z0-9-_\\s]*"},variant:"outlined",size:"small"}),r.a.createElement(F.a,{p:1},r.a.createElement(T.a,{type:"submit",size:"small",color:"primary"},"\u041e\u043a"),r.a.createElement(T.a,{onClick:_,size:"small",color:"secondary"},"\u041e\u0442\u043c\u0435\u043d\u0430"))));return r.a.createElement(fe.a,null,m?r.a.createElement(he.a,{colSpan:5}," ...\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"):r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a,{padding:"none"},r.a.createElement(be.a,{checked:v,onChange:k,id:f,color:"default"})),r.a.createElement(he.a,{padding:"none"},r.a.createElement(x.a,{title:h,variant:"body1",component:"div"},h.length>30?"".concat(h.slice(0,30),"..."):h),r.a.createElement(T.a,{className:n.link,title:"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c",color:"default",onClick:function(e){var t=document.createElement("input");t.value=L,document.body.appendChild(t),t.select(),document.execCommand("copy"),e.currentTarget.textContent="\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e!",document.body.removeChild(t)}},L),r.a.createElement(x.a,{color:"textPrimary",variant:"body2",component:"div"},u?N:E)),U>=768&&r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a,null,g),r.a.createElement(he.a,{padding:"none"},function(e){var t=new Date(e);return"".concat(ge(t.getDate()),".").concat(ge(t.getMonth()+1),".").concat(t.getFullYear())}(O)),r.a.createElement(he.a,{padding:"none"},r.a.createElement(T.a,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",color:"primary",onClick:_},"\u270e"),r.a.createElement(T.a,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",color:"secondary",onClick:function(){window.confirm("\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435?")&&(o(Object(w.a)(Object(w.a)({},W),{},{isLoading:!0})),t.removeLink(f).then((function(){return t.getLinks(d._id).then((function(e){return S(e)}))})).catch(C))}},"\u2716")))))})),ve=Object(k.a)((function(){return Object(S.a)({button:{padding:0}})})),ke={fetchLinksRequestAction:function(){return{type:"FETCH_LINKS_REQUEST"}},fetchLinksSuccessAction:B,fetchLinksFailureAction:Y},Se=Object(o.b)((function(e){return{linksState:e.linksState,userState:e.userState}}),ke)((function(e){var t=Object(a.useContext)(y),n=ve(),c=Object(a.useState)([]),l=Object(A.a)(c,2),i=l[0],o=l[1],u=Object(a.useState)(Object(w.a)({},D)),s=Object(A.a)(u,2),m=s[0],d=s[1],p=m.sorterType,f=m.isAscending,h=e.fetchLinksRequestAction,b=e.fetchLinksSuccessAction,E=e.fetchLinksFailureAction,g=e.userState.user,O=e.linksState,j=O.links,v=O.error,k=O.isLoading,S=j.length===i.length,C=document.documentElement.clientWidth,L=j.sort((function(e,t){function n(e,t,n){switch(n){case"string":return e<t?-1:e>t?1:0;default:return+e-+t}}switch(p){case"date":var a=new Date(e[p]).getTime(),r=new Date(t[p]).getTime();return f?n(a,r,"date"):n(r,a,"date");case"counter":var c=e[p],l=t[p];return f?n(c,l,"number"):n(l,c,"number");case"title":var i=e[p].toLowerCase(),o=t[p].toLowerCase();return f?n(i,o,"string"):n(o,i,"string");default:return 0}})),U=function(e){var t=e.buttonType,a=e.children,c=t===p?f?"\u25b2":"\u25bc":"";return r.a.createElement(T.a,{className:n.button,color:"default",onClick:_(t)},a," ",c)};Object(a.useEffect)((function(){return g&&(h(),t.getLinks(g._id).then((function(e){return b(e)})).catch(E)),function(){h()}}),[g]);var _=function(e){return function(){d({sorterType:e,isAscending:p===e&&!f})}},N=function(e){return function(t){e?o(Object(me.a)(i.filter((function(e){return e!==t.target.id})))):(i.push(t.target.id),o(Object(me.a)(i)))}};return g?k?r.a.createElement(P,null):v?r.a.createElement(M,{error:v}):0===j.length?r.a.createElement(F.a,{p:3},r.a.createElement(x.a,{variant:"body1",component:"div"},"\u0412\u044b \u0435\u0449\u0451 \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u0441\u0441\u044b\u043b\u043e\u043a")):r.a.createElement(F.a,{p:1},r.a.createElement(de.a,{stickyHeader:!0},r.a.createElement(pe.a,null,r.a.createElement(fe.a,null,r.a.createElement(he.a,{padding:"none"},r.a.createElement(be.a,{title:"\u0412\u044b\u0434\u0435\u043b\u0438\u0442\u044c/\u0441\u043d\u044f\u0442\u044c \u0432\u0441\u0435",checked:S,onChange:function(){if(S)o([]);else{var e=j.map((function(e){return e._id}));o(e)}},color:"default"})),r.a.createElement(he.a,{title:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0438\u043c\u0435\u043d\u0438",padding:"none"},r.a.createElement(U,{buttonType:"title"},"\u0421\u0441\u044b\u043b\u043a\u0430")),C>=768&&r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a,{title:"\u041f\u0435\u0440\u0435\u0445\u043e\u0434\u043e\u0432",padding:"none"},r.a.createElement(U,{buttonType:"counter"},"\u27a5")),r.a.createElement(he.a,{padding:"none"},r.a.createElement(U,{buttonType:"date"},"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f")),r.a.createElement(he.a,{padding:"none"})))),r.a.createElement(Ee.a,null,L.map((function(e){var t=e._id,n=-1!==i.indexOf(t);return r.a.createElement(ye,{key:t,link:e,checkboxHandler:N(n),checkboxIsChecked:n})})))),r.a.createElement(F.a,{py:2,display:"flex",justifyContent:"flex-end"},r.a.createElement(T.a,{variant:"contained",color:"secondary",disabled:0===i.length,onClick:function(){h(),t.removeLinkMany(i).then((function(){return t.getLinks(g._id).then((function(e){b(e),o([])}))})).catch(E)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435"))):r.a.createElement(F.a,{p:3},r.a.createElement(x.a,{variant:"body1",component:"div"},"\u0412\u044b \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b!"))})),Ce=Object(k.a)((function(){return Object(S.a)({title:{margin:"10px"}})})),xe=function(){var e=Ce();return r.a.createElement(r.a.Fragment,null,r.a.createElement(le,null,r.a.createElement(x.a,{variant:"h3",className:e.title,align:"center",component:"h1"},"\u0421\u043f\u0438\u0441\u043e\u043a \u0432\u0430\u0448\u0438\u0445 \u0441\u0441\u044b\u043b\u043e\u043a")),r.a.createElement(U,null,r.a.createElement(Se,null)))},Le=Object(k.a)((function(){return Object(S.a)({title:{margin:"10px"}})})),Ue=function(){var e=Le();return r.a.createElement(le,null,r.a.createElement(x.a,{variant:"h3",className:e.title,align:"center",component:"h1"},"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e!"))},we={fetchUserRequestAction:Q,fetchUserSuccessAction:Z},Ae=Object(o.b)(null,we)((function(e){var t=Object(a.useContext)(y),n=e.fetchUserRequestAction,c=e.fetchUserSuccessAction;return Object(a.useEffect)((function(){n(),t.getUser().then(c).catch((function(){return c(null)}))}),[]),r.a.createElement(v.c,null,r.a.createElement(v.a,{path:"/",exact:!0,component:se}),r.a.createElement(v.a,{path:"/user/links",exact:!0,component:xe}),r.a.createElement(v.a,{component:Ue}))})),Te=n(39),Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USER_REQUEST":return Object(w.a)(Object(w.a)({},q),{},{isLoading:!0});case"FETCH_USER_SUCCESS":return Object(w.a)(Object(w.a)({},q),{},{user:t.payload});case"FETCH_USER_FAILURE":return Object(w.a)(Object(w.a)({},q),{},{error:t.payload});default:return e}},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_LINKS_REQUEST":return Object(w.a)(Object(w.a)({},z),{},{isLoading:!0});case"FETCH_LINKS_SUCCESS":return Object(w.a)(Object(w.a)({},z),{},{links:t.payload});case"FETCH_LINKS_FAILURE":return Object(w.a)(Object(w.a)({},z),{},{error:t.payload});default:return e}},Ne=Object(Te.b)({userState:Fe,linksState:_e}),Re=Object(Te.c)(Ne);s.a.config();var He=new j;l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:Re},r.a.createElement(y.Provider,{value:He},r.a.createElement(i.a,null,r.a.createElement(Ae,null))))),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.5a8976dd.chunk.js.map