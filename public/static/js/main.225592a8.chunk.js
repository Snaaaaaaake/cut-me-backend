(this["webpackJsonpcut-me"]=this["webpackJsonpcut-me"]||[]).push([[0],{82:function(e,t,n){e.exports=n(95)},95:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),l=n.n(c),i=n(42),o=n(15),u=n(66),s=n.n(u),m=n(56),d=n.n(m),p=n(67),f=n(68),h=n(69),b={"Content-Type":"application/json"};function E(e){return g.apply(this,arguments)}function g(){return(g=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw e.sent;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=function(){function e(t){Object(p.a)(this,e),this.apiUrl=void 0,this.usersUrl=void 0,this.linksUrl=void 0,this.apiUrl=t||"http://localhost:8080",this.usersUrl="".concat(this.apiUrl,"/usersApi"),this.linksUrl="".concat(this.apiUrl,"/linksApi")}return Object(f.a)(e,[{key:"getUser",value:function(){return fetch("".concat(this.usersUrl,"/me"),{headers:b,credentials:"include"}).then(E)}},{key:"userSignUp",value:function(e,t,n){return fetch("".concat(this.usersUrl,"/signup"),{method:"post",headers:b,body:JSON.stringify({email:t,password:n,name:e})}).then(E)}},{key:"userSignIn",value:function(e,t){return fetch("".concat(this.usersUrl,"/signin"),{method:"post",headers:b,body:JSON.stringify({email:t,password:e})}).then(E)}},{key:"userSignOut",value:function(){return fetch("".concat(this.usersUrl,"/signout"),{headers:b,credentials:"include"}).then(E)}},{key:"addLink",value:function(e,t,n,a){return fetch("".concat(this.linksUrl,"/add"),{method:"post",headers:b,body:JSON.stringify({url:e,title:n,short:a,owner:t})}).then(E)}},{key:"getLinks",value:function(e){return fetch("".concat(this.linksUrl,"/get"),{method:"post",credentials:"include",headers:b,body:JSON.stringify({owner:e})}).then(E)}},{key:"removeLink",value:function(e){return fetch("".concat(this.linksUrl,"/remove"),{method:"delete",credentials:"include",headers:b,body:JSON.stringify({_id:e})}).then(E)}},{key:"removeLinkMany",value:function(e){return fetch("".concat(this.linksUrl,"/removeMany"),{method:"delete",credentials:"include",headers:b,body:JSON.stringify({array:e})}).then(E)}},{key:"editLink",value:function(e,t){return fetch("".concat(this.linksUrl,"/edit"),{method:"post",credentials:"include",headers:b,body:JSON.stringify({_id:e,title:t})}).then(E)}}]),e}(),j=Object(a.createContext)(null),y=n(13),v=n(128),k=n(139),S=n(127),C=n(122),x=n(125),L=function(e){return r.a.createElement(C.a,{maxWidth:"md"},r.a.createElement(x.a,{elevation:3},e.children))},U=n(4),w=n(18),A=n(129),F=n(136),T=n(137),_={name:"",password:"",passwordAgain:"",email:"",isLoading:!1,error:null},N={password:"",email:"",isLoading:!1,error:null},R={url:"",title:"",owner:"",short:"",isLoading:!1,error:null,link:null},H={isEditing:!1,editValue:"",isLoading:!1},W={isModalOpened:!1,modalContent:""},I={user:null,error:null,isLoading:!1},q={links:[],error:null,isLoading:!1},z={sorterType:"date",isAscending:!1},D=n(126),J=function(){return r.a.createElement(F.a,{p:3,display:"flex",justifyContent:"center"},r.a.createElement(D.a,null))},P=function(e){var t=e.error;return r.a.createElement(F.a,{p:4,style:{color:"red"}},r.a.createElement(S.a,{variant:"body1",component:"p"},t.message))},M=n(29),K=n(135),V=function(){return{type:"FETCH_USER_REQUEST"}},Q=function(e){return{type:"FETCH_USER_SUCCESS",payload:e}},Z=function(e){return{type:"FETCH_LINKS_SUCCESS",payload:e}},B=function(e){return{type:"FETCH_LINKS_FAILURE",payload:e}},Y=Object(v.a)((function(){return Object(k.a)({root:{border:"none"},formContainer:{padding:"15px",display:"flex",flexWrap:"wrap",border:"none"}})})),X={fetchUserSuccessAction:Q},G=Object(o.b)(null,X)((function(e){var t=Object(a.useContext)(j),n=Y(),c=Object(a.useState)(Object(U.a)({},_)),l=Object(w.a)(c,2),i=l[0],o=l[1],u=i.name,s=i.password,m=i.passwordAgain,d=i.email,p=i.isLoading,f=i.error,h=e.fetchUserSuccessAction,b=e.closeHandler,E=function(e){e.preventDefault(),o(Object(U.a)(Object(U.a)({},i),{},Object(M.a)({},e.target.id,e.target.value)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{mt:3},r.a.createElement(S.a,{variant:"h6",align:"center",component:"h5"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),r.a.createElement("form",{className:n.root,onSubmit:function(e){e.preventDefault(),e.currentTarget.checkValidity()?s!==m?o(Object(U.a)(Object(U.a)({},i),{},{error:"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442!"})):(o(Object(U.a)(Object(U.a)({},i),{},{isLoading:!0})),t.userSignUp(u,d,s).then((function(e){h(e),o(Object(U.a)({},_)),alert("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441\u043e\u0437\u0434\u0430\u043d, \u0432\u0445\u043e\u0434 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d"),b()})).catch((function(e){return o(Object(U.a)(Object(U.a)({},i),{},{error:e.message}))}))):o(Object(U.a)(Object(U.a)({},i),{},{error:"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0444\u043e\u0440\u043c\u044b!"}))}},r.a.createElement("fieldset",{className:n.formContainer,disabled:p},r.a.createElement(K.a,{onChange:E,id:"name",label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",helperText:"\u0414\u043e\u043f\u0443\u0441\u043a\u0430\u044e\u0442\u0441\u044f \u0431\u0443\u043a\u0432\u044b \u0438 \u0446\u0438\u0444\u0440\u044b",fullWidth:!0,margin:"normal",required:!0,type:"text",value:u,inputProps:{pattern:"[\u0430-\u044f\u0410-\u042fA-Za-z0-9_-s]*",minLength:2,maxLength:25}}),r.a.createElement(K.a,{onChange:E,id:"email",label:"Email",helperText:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",fullWidth:!0,margin:"normal",required:!0,type:"email",value:d}),r.a.createElement(K.a,{onChange:E,id:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",helperText:"\u041c\u0438\u043d\u0438\u043c\u0443\u043c \u0448\u0435\u0441\u0442\u044c \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",fullWidth:!0,margin:"normal",required:!0,type:"password",value:s,inputProps:{pattern:"[^<>s]*",minLength:6}}),r.a.createElement(K.a,{onChange:E,id:"passwordAgain",label:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",fullWidth:!0,margin:"normal",required:!0,type:"password",value:m}),r.a.createElement(S.a,{style:{color:"red"},variant:"subtitle1"},f),r.a.createElement(F.a,{mt:3},r.a.createElement(A.a,{type:"submit",variant:"contained",color:"primary"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")))))})),$=Object(v.a)((function(){return Object(k.a)({root:{border:"none"},formContainer:{padding:"15px",display:"flex",flexWrap:"wrap",border:"none"}})})),ee={fetchUserSuccessAction:Q},te=Object(o.b)(null,ee)((function(e){var t=Object(a.useContext)(j),n=$(),c=Object(a.useState)(Object(U.a)({},N)),l=Object(w.a)(c,2),i=l[0],o=l[1],u=i.password,s=i.email,m=i.isLoading,d=i.error,p=e.fetchUserSuccessAction,f=e.closeHandler,h=function(e){e.preventDefault(),o(Object(U.a)(Object(U.a)({},i),{},Object(M.a)({},e.target.id,e.target.value)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{mt:2},r.a.createElement(S.a,{variant:"h6",align:"center",component:"h5"},"\u0412\u043e\u0439\u0442\u0438")),r.a.createElement("form",{className:n.root,onSubmit:function(e){e.preventDefault(),e.currentTarget.checkValidity()?(o(Object(U.a)(Object(U.a)({},i),{},{isLoading:!0})),t.userSignIn(u,s).then((function(e){p(e),o(Object(U.a)({},N)),alert("\u0412\u0445\u043e\u0434 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e!"),f()})).catch((function(e){return o(Object(U.a)(Object(U.a)({},i),{},{error:e.message}))}))):o(Object(U.a)(Object(U.a)({},i),{},{error:"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0444\u043e\u0440\u043c\u044b!"}))}},r.a.createElement("fieldset",{className:n.formContainer,disabled:m},r.a.createElement(K.a,{onChange:h,id:"email",label:"Email",helperText:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",fullWidth:!0,margin:"normal",required:!0,type:"email",value:s}),r.a.createElement(K.a,{onChange:h,id:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",fullWidth:!0,margin:"normal",required:!0,type:"password",value:u}),r.a.createElement(S.a,{style:{color:"red"},variant:"subtitle1"},d),r.a.createElement(F.a,{mt:3},r.a.createElement(A.a,{type:"submit",variant:"contained",color:"primary"},"\u0412\u043e\u0439\u0442\u0438")))))})),ne={fetchUserRequestAction:V,fetchUserSuccessAction:Q,fetchUserFailureAction:function(e){return{type:"FETCH_USER_FAILURE",payload:e}}},ae=Object(o.b)((function(e){return{userState:e.userState}}),ne)((function(e){var t=Object(y.f)(),n=Object(a.useContext)(j),c=e.fetchUserRequestAction,l=e.fetchUserSuccessAction,i=e.fetchUserFailureAction,o=e.closeHandler,u=e.userState,s=u.user,m=u.error,d=u.isLoading;return m?r.a.createElement(P,{error:m}):d?r.a.createElement(J,null):s?r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{p:2},r.a.createElement(S.a,{variant:"h6",component:"h5"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c")),r.a.createElement(F.a,{p:2},r.a.createElement(S.a,{variant:"body1",component:"p"},"\u0418\u043c\u044f: ",s.name),r.a.createElement(S.a,{variant:"body1",component:"p"},"\u041f\u043e\u0447\u0442\u0430: ",s.email)),r.a.createElement(F.a,{p:2,display:"flex",justifyContent:"center"},r.a.createElement(A.a,{onClick:function(){c(),n.userSignOut().then((function(){l(null),alert("\u0412\u044b \u0432\u044b\u0448\u043b\u0438 \u0438\u0437 \u0441\u0432\u043e\u0435\u0433\u043e \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"),o(),t.push("/")})).catch(i)},variant:"contained",color:"primary"},"\u0412\u044b\u0439\u0442\u0438"))):r.a.createElement("div",null,"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")})),re=Object(v.a)((function(){return Object(k.a)({modal:{display:"grid",alignItems:"center",justifyContent:"center",overflowY:"auto"},modalContainer:{position:"relative"},modalCloseButton:{position:"absolute",top:"0px",right:"-15px",borderRadius:"50px"}})})),ce=Object(o.b)((function(e){return{userState:e.userState}}))((function(e){var t=re(),n=Object(y.f)(),c=Object(y.g)(),l=Object(a.useState)(Object(U.a)({},W)),i=Object(w.a)(l,2),o=i[0],u=i[1],s=o.isModalOpened,m=o.modalContent,d=e.userState,p=d.user,f=d.isLoading,h=d.error,b=function(e){return function(){u({isModalOpened:!0,modalContent:e})}},E=function(){u(Object(U.a)({},W))},g=function(){return f?r.a.createElement(J,null):h?r.a.createElement(P,{error:h}):p?r.a.createElement(r.a.Fragment,null,c.pathname.includes("user/links")?r.a.createElement(A.a,{onClick:function(){return n.push("/")},color:"primary"},"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"):r.a.createElement(A.a,{onClick:function(){return n.push("/user/links")},color:"primary"},"\u041c\u043e\u0438 \u0441\u0441\u044b\u043b\u043a\u0438"),r.a.createElement(A.a,{onClick:b(r.a.createElement(ae,{closeHandler:E})),color:"primary"},"\u041c\u043e\u0439 \u043f\u0440\u043e\u0444\u0438\u043b\u044c")):r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{onClick:b(r.a.createElement(te,{closeHandler:E})),color:"primary"},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement(A.a,{onClick:b(r.a.createElement(G,{closeHandler:E})),color:"primary"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{p:1,display:"flex",justifyContent:"flex-end",flexWrap:"wrap"},r.a.createElement(g,null)),r.a.createElement(F.a,{mb:5},e.children),r.a.createElement(T.a,{disableAutoFocus:!0,disableEnforceFocus:!0,className:t.modal,open:s,onClose:E},r.a.createElement(x.a,{className:t.modalContainer,elevation:2},r.a.createElement(A.a,{className:t.modalCloseButton,size:"small",title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:E,color:"primary"},"X"),m)))})),le=Object(v.a)((function(){return Object(k.a)({root:{border:"none"},formContainer:{padding:"15px",display:"flex",flexWrap:"wrap",border:"none"},copyLinkElements:{margin:"5px"}})})),ie=Object(o.b)((function(e){return{userState:e.userState}}))((function(e){var t,n=Object(a.useContext)(j),c=le(),l=Object(a.useState)(Object(U.a)({},R)),i=Object(w.a)(l,2),o=i[0],u=i[1],s=o.url,m=o.title,d=o.short,p=o.error,f=o.isLoading,h=o.link,b=e.userState.user?e.userState.user._id:"5f91d4ade6a8f725188ff0e5",E=function(e){e.preventDefault(),u(Object(U.a)(Object(U.a)({},o),{},Object(M.a)({},e.target.id,e.target.value)))};return r.a.createElement(r.a.Fragment,null,h&&r.a.createElement(F.a,{pt:3,pb:2,display:"flex",justifyContent:"center",flexWrap:"wrap"},r.a.createElement(K.a,{label:"\u0412\u0430\u0448\u0430 \u0441\u0441\u044b\u043b\u043a\u0430",inputProps:{readOnly:!0},value:h,inputRef:function(e){return t=e},variant:"outlined",size:"small",className:c.copyLinkElements}),r.a.createElement(A.a,{onClick:function(e){t.select(),document.execCommand("copy"),e.currentTarget.textContent="\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e!"},variant:"contained",color:"secondary",className:c.copyLinkElements},"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c")),r.a.createElement("form",{className:c.root,onSubmit:function(e){e.preventDefault(),e.currentTarget.checkValidity()?(u(Object(U.a)(Object(U.a)({},o),{},{isLoading:!0})),n.addLink(s,b,m,d).then((function(e){u(Object(U.a)(Object(U.a)({},R),{},{link:"".concat("http://just.cut-me.ru","/").concat(e[0].hash)}))})).catch((function(e){return u(Object(U.a)(Object(U.a)({},o),{},{isLoading:!1,error:e.message}))}))):u(Object(U.a)(Object(U.a)({},o),{},{error:"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0444\u043e\u0440\u043c\u044b!"}))}},r.a.createElement("fieldset",{className:c.formContainer,disabled:f},r.a.createElement(K.a,{onChange:E,id:"url",label:"\u0421\u0441\u044b\u043b\u043a\u0430",helperText:"\u0421\u0441\u044b\u043b\u043a\u0430, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u043a\u0440\u0430\u0442\u0438\u0442\u044c",fullWidth:!0,margin:"normal",required:!0,size:"medium",type:"text",value:s,inputProps:{pattern:"[^<>]*"}}),r.a.createElement(K.a,{onChange:E,id:"title",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",helperText:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0432\u044b \u0431\u0443\u0434\u0435\u0442\u0435 \u0432\u0438\u0434\u0435\u0442\u044c \u0432 \u0441\u0432\u043e\u0451\u043c \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0435",fullWidth:!0,margin:"normal",type:"text",size:"small",value:m,inputProps:{pattern:"[\u0430-\u044f\u0410-\u042f\u0451\u0401A-Za-z0-9-_\\s]*"}}),r.a.createElement(K.a,{onChange:E,id:"short",label:"\u0421\u043e\u043a\u0440\u0430\u0449\u0435\u043d\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442",helperText:"\u0411\u0443\u0434\u0435\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u0441\u043e\u043a\u0440\u0430\u0449\u0435\u043d\u043d\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e \u0441\u0441\u044b\u043b\u043a\u0438, \u0434\u043e\u043f\u0443\u0441\u043a\u0430\u044e\u0442\u0441\u044f \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435\r \u0431\u0443\u043a\u0432\u044b \u0438 \u0446\u0438\u0444\u0440\u044b",fullWidth:!0,size:"small",margin:"normal",type:"text",value:d,inputProps:{pattern:"[A-Za-z0-9]*"}}),r.a.createElement(S.a,{style:{color:"red"},variant:"subtitle1"},p),r.a.createElement(F.a,{mt:3},r.a.createElement(A.a,{type:"submit",variant:"contained",color:"primary"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")))))})),oe=Object(v.a)((function(){return Object(k.a)({title:{margin:"10px"}})})),ue=function(){var e=oe();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ce,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{variant:"h3",className:e.title,align:"center",component:"h1"},"\u0421\u043e\u043a\u0440\u0430\u0442\u0438\u0442\u0435\u043b\u044c \u0441\u0441\u044b\u043b\u043e\u043a"),r.a.createElement(S.a,{variant:"body1",className:e.title,align:"center"},"\u0421\u0435\u0440\u0432\u0438\u0441 \u043f\u0440\u0435\u0434\u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d \u0434\u043b\u044f \u0441\u043e\u043a\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u0434\u043b\u0438\u043d\u043d\u044b\u0445 \u0441\u0441\u044b\u043b\u043e\u043a. \u0415\u0441\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u0432\u0435\u0441\u0442\u0438 \u0430\u043a\u043a\u0430\u0443\u043d\u0442 \u0438 \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u0442\u044c \u0432 \u043d\u0451\u043c \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c \u0441\u0441\u044b\u043b\u043e\u043a. \u042d\u0442\u043e \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043e\u0447\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0432\u0441\u0451 \u0443\u0441\u043b\u043e\u0432\u043d\u043e ;)"))),r.a.createElement(L,null,r.a.createElement(ie,null)))},se=n(59),me=n(132),de=n(133),pe=n(130),fe=n(131),he=n(138),be=n(134);function Ee(e){return e<10?"0".concat(e):"".concat(e)}var ge=Object(v.a)((function(e){return Object(k.a)({link:{padding:0,textTransform:"none",color:e.palette.text.secondary,fontWeight:"normal"}})})),Oe={fetchLinksSuccessAction:Z,fetchLinksFailureAction:B},je=Object(o.b)((function(e){return{userState:e.userState}}),Oe)((function(e){var t=Object(a.useContext)(j),n=ge(),c=Object(a.useState)(Object(U.a)({},H)),l=Object(w.a)(c,2),i=l[0],o=l[1],u=i.isEditing,s=i.editValue,m=i.isLoading,d=e.userState.user,p=e.link,f=p._id,h=p.url,b=p.title,E=p.counter,g=p.date,O=p.hash,y=e.checkboxIsChecked,v=e.checkboxHandler,k=e.fetchLinksSuccessAction,C=e.fetchLinksFailureAction,x="".concat("http://just.cut-me.ru","/").concat(O),L=document.documentElement.clientWidth,T=function(){o(Object(U.a)(Object(U.a)({},H),{},{isEditing:!u}))},_=r.a.createElement("form",{onSubmit:function(){o(Object(U.a)(Object(U.a)({},H),{},{isLoading:!0})),t.editLink(f,s).then((function(){return t.getLinks(d._id).then((function(e){k(e),o(Object(U.a)({},H))}))})).catch(C)}},r.a.createElement(F.a,{display:"flex",alignItems:"center",flexWrap:"wrap"},r.a.createElement(K.a,{autoFocus:!0,value:s,onChange:function(e){o(Object(U.a)(Object(U.a)({},H),{},{isEditing:!0,editValue:e.target.value}))},id:"email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",margin:"normal",type:"text",inputProps:{pattern:"[\u0430-\u044f\u0410-\u042f\u0451\u0401A-Za-z0-9-_\\s]*"},variant:"outlined",size:"small"}),r.a.createElement(F.a,{p:1},r.a.createElement(A.a,{type:"submit",size:"small",color:"primary"},"\u041e\u043a"),r.a.createElement(A.a,{onClick:T,size:"small",color:"secondary"},"\u041e\u0442\u043c\u0435\u043d\u0430"))));return r.a.createElement(pe.a,null,m?r.a.createElement(fe.a,{colSpan:5}," ...\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"):r.a.createElement(r.a.Fragment,null,r.a.createElement(fe.a,{padding:"none"},r.a.createElement(he.a,{checked:y,onChange:v,id:f,color:"default"})),r.a.createElement(fe.a,{padding:"none"},r.a.createElement(S.a,{title:h,variant:"body1",component:"div"},h.length>30?"".concat(h.slice(0,30),"..."):h),r.a.createElement(A.a,{className:n.link,title:"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c",color:"default",onClick:function(e){var t=document.createElement("input");t.value=x,document.body.appendChild(t),t.select(),document.execCommand("copy"),e.currentTarget.textContent="\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e!",document.body.removeChild(t)}},x),r.a.createElement(S.a,{color:"textPrimary",variant:"body2",component:"div"},u?_:b)),L>=768&&r.a.createElement(r.a.Fragment,null,r.a.createElement(fe.a,null,E),r.a.createElement(fe.a,{padding:"none"},function(e){var t=new Date(e);return"".concat(Ee(t.getDate()),".").concat(Ee(t.getMonth()+1),".").concat(t.getFullYear())}(g)),r.a.createElement(fe.a,{padding:"none"},r.a.createElement(A.a,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",color:"primary",onClick:T},"\u270e"),r.a.createElement(A.a,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",color:"secondary",onClick:function(){window.confirm("\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435?")&&(o(Object(U.a)(Object(U.a)({},H),{},{isLoading:!0})),t.removeLink(f).then((function(){return t.getLinks(d._id).then((function(e){return k(e)}))})).catch(C))}},"\u2716")))))})),ye=Object(v.a)((function(){return Object(k.a)({button:{padding:0}})})),ve={fetchLinksRequestAction:function(){return{type:"FETCH_LINKS_REQUEST"}},fetchLinksSuccessAction:Z,fetchLinksFailureAction:B},ke=Object(o.b)((function(e){return{linksState:e.linksState,userState:e.userState}}),ve)((function(e){var t=Object(a.useContext)(j),n=ye(),c=Object(a.useState)([]),l=Object(w.a)(c,2),i=l[0],o=l[1],u=Object(a.useState)(Object(U.a)({},z)),s=Object(w.a)(u,2),m=s[0],d=s[1],p=m.sorterType,f=m.isAscending,h=e.fetchLinksRequestAction,b=e.fetchLinksSuccessAction,E=e.fetchLinksFailureAction,g=e.userState.user,O=e.linksState,y=O.links,v=O.error,k=O.isLoading,C=y.length===i.length,x=document.documentElement.clientWidth,L=y.sort((function(e,t){function n(e,t,n){switch(n){case"string":return e<t?-1:e>t?1:0;default:return+e-+t}}switch(p){case"date":var a=new Date(e[p]).getTime(),r=new Date(t[p]).getTime();return f?n(a,r,"date"):n(r,a,"date");case"counter":var c=e[p],l=t[p];return f?n(c,l,"number"):n(l,c,"number");case"title":var i=e[p].toLowerCase(),o=t[p].toLowerCase();return f?n(i,o,"string"):n(o,i,"string");default:return 0}})),T=function(e){var t=e.buttonType,a=e.children,c=t===p?f?"\u25b2":"\u25bc":"";return r.a.createElement(A.a,{className:n.button,color:"default",onClick:_(t)},a," ",c)};Object(a.useEffect)((function(){return g&&(h(),t.getLinks(g._id).then((function(e){return b(e)})).catch(E)),function(){h()}}),[g]);var _=function(e){return function(){d({sorterType:e,isAscending:p===e&&!f})}},N=function(e){return function(t){e?o(Object(se.a)(i.filter((function(e){return e!==t.target.id})))):(i.push(t.target.id),o(Object(se.a)(i)))}};return g?k?r.a.createElement(J,null):v?r.a.createElement(P,{error:v}):0===y.length?r.a.createElement(F.a,{p:3},r.a.createElement(S.a,{variant:"body1",component:"div"},"\u0412\u044b \u0435\u0449\u0451 \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u0441\u0441\u044b\u043b\u043e\u043a")):r.a.createElement(F.a,{p:1},r.a.createElement(me.a,{stickyHeader:!0},r.a.createElement(de.a,null,r.a.createElement(pe.a,null,r.a.createElement(fe.a,{padding:"none"},r.a.createElement(he.a,{title:"\u0412\u044b\u0434\u0435\u043b\u0438\u0442\u044c/\u0441\u043d\u044f\u0442\u044c \u0432\u0441\u0435",checked:C,onChange:function(){if(C)o([]);else{var e=y.map((function(e){return e._id}));o(e)}},color:"default"})),r.a.createElement(fe.a,{title:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0438\u043c\u0435\u043d\u0438",padding:"none"},r.a.createElement(T,{buttonType:"title"},"\u0421\u0441\u044b\u043b\u043a\u0430")),x>=768&&r.a.createElement(r.a.Fragment,null,r.a.createElement(fe.a,{title:"\u041f\u0435\u0440\u0435\u0445\u043e\u0434\u043e\u0432",padding:"none"},r.a.createElement(T,{buttonType:"counter"},"\u27a5")),r.a.createElement(fe.a,{padding:"none"},r.a.createElement(T,{buttonType:"date"},"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f")),r.a.createElement(fe.a,{padding:"none"})))),r.a.createElement(be.a,null,L.map((function(e){var t=e._id,n=-1!==i.indexOf(t);return r.a.createElement(je,{key:t,link:e,checkboxHandler:N(n),checkboxIsChecked:n})})))),r.a.createElement(F.a,{py:2,display:"flex",justifyContent:"flex-end"},r.a.createElement(A.a,{variant:"contained",color:"secondary",disabled:0===i.length,onClick:function(){h(),t.removeLinkMany(i).then((function(){return t.getLinks(g._id).then((function(e){b(e),o([])}))})).catch(E)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435"))):r.a.createElement(F.a,{p:3},r.a.createElement(S.a,{variant:"body1",component:"div"},"\u0412\u044b \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b!"))})),Se=Object(v.a)((function(){return Object(k.a)({title:{margin:"10px"}})})),Ce=function(){var e=Se();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ce,null,r.a.createElement(S.a,{variant:"h3",className:e.title,align:"center",component:"h1"},"\u0421\u043f\u0438\u0441\u043e\u043a \u0432\u0430\u0448\u0438\u0445 \u0441\u0441\u044b\u043b\u043e\u043a")),r.a.createElement(L,null,r.a.createElement(ke,null)))},xe=Object(v.a)((function(){return Object(k.a)({title:{margin:"10px"}})})),Le=function(){var e=xe();return r.a.createElement(ce,null,r.a.createElement(S.a,{variant:"h3",className:e.title,align:"center",component:"h1"},"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e!"))},Ue={fetchUserRequestAction:V,fetchUserSuccessAction:Q},we=Object(o.b)(null,Ue)((function(e){var t=Object(a.useContext)(j),n=e.fetchUserRequestAction,c=e.fetchUserSuccessAction;return Object(a.useEffect)((function(){n(),t.getUser().then(c).catch((function(){return c(null)}))}),[]),r.a.createElement(y.c,null,r.a.createElement(y.a,{path:"/",exact:!0,component:ue}),r.a.createElement(y.a,{path:"/user/links",exact:!0,component:Ce}),r.a.createElement(y.a,{component:Le}))})),Ae=n(39),Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USER_REQUEST":return Object(U.a)(Object(U.a)({},I),{},{isLoading:!0});case"FETCH_USER_SUCCESS":return Object(U.a)(Object(U.a)({},I),{},{user:t.payload});case"FETCH_USER_FAILURE":return Object(U.a)(Object(U.a)({},I),{},{error:t.payload});default:return e}},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_LINKS_REQUEST":return Object(U.a)(Object(U.a)({},q),{},{isLoading:!0});case"FETCH_LINKS_SUCCESS":return Object(U.a)(Object(U.a)({},q),{},{links:t.payload});case"FETCH_LINKS_FAILURE":return Object(U.a)(Object(U.a)({},q),{},{error:t.payload});default:return e}},_e=Object(Ae.b)({userState:Fe,linksState:Te}),Ne=Object(Ae.c)(_e);s.a.config();var Re=new O;l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:Ne},r.a.createElement(j.Provider,{value:Re},r.a.createElement(i.a,null,r.a.createElement(we,null))))),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.225592a8.chunk.js.map